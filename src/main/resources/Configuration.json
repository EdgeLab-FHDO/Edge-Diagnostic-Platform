{
  "modules": [
    {"type": "ConsoleModule", "name": "console"},
    {"type": "ScenarioModule", "name": "dummy", "path": "Scenarios/dummy.json"},
    {"type": "UtilityModule", "name": "util"},
    {
      "type" : "RESTModule",
      "name":  "rest",
      "port": 4567,
      "baseURL": "/rest",
      "POST" : [
        {"name" : "client.register","URL": "/client/register","command": "register_client $body","information":  []},
        {"name" : "client.heartbeat","URL": "/client/beat","command": "client_receive_heart_beat $body","information":  []},
        {"name" : "node.register","URL": "/node/register","command": "register_node $body","information":  []},
        {"name" : "node.heartbeat","URL": "/node/beat","command": "node_receive_heart_beat $body","information":  []},
        {"name" : "client.assign","URL": "/client/assign","command": "assign_client $id","information":  ["id"]},
        {"name" : "client.report","URL": "/client/report","command": "report_latency $path $content","information":  ["path", "content"]},
        {"name" : "node.disconnect","URL": "/node/disconnect","command": "disconnect_client $body","information":  []}
      ],
      "GET" : [
        {"name" : "get1", "URL":  "/limit_test"},
        {"name": "client.getnode", "URL": "/client/get_node/:client_id"}
      ]
    },
    {"type": "AdvantEdgeModule", "name": "ae", "port": "80", "address": "http://localhost"},
    {"type" : "RemoteExecutionModule", "name": "remote"},
    {"type" :  "MatchMakingModule-ScoreBased", "name":  "mm"}
  ],

  "connections" : [
    {
      "in" : "console.in",
      "out" : "console.out",
      "commands" : {
        "test $param" : "console $param"
      }
    },
    {
      "in" : "console.debug",
      "out" : "console.out",
      "commands" : {
        "fromDebug $message" : "console $message"
      }
    },
    {
      "in" : "console.in",
      "out" : "util.control",
      "commands" : {
        "exit" : "util exit",
        "pause $module" : "util pauseModule $module",
        "resume $module" : "util resumeModule $module"
      }
    },
    {
      "in" : "dummy.scenario",
      "out" : "console.out",
      "commands" : {
        "deploy_application" : "console helmChartExecution" ,
        "update_gui" : "console GUIUpdateExecution" ,
        "node_request" : "console matchMakingExecution"
      }
    },
    {
      "in" : "console.in",
      "out": "dummy.dispatcher",
      "commands": {
        "run_scenario" : "dispatcher run",
        "pause_scenario" : "dispatcher pause",
        "resume_scenario" : "dispatcher resume"
      }
    },
    {
      "in" : "console.in",
      "out" : "rest.get1",
      "commands" : {
        "get_test": "toGET resource {\"name\": \"example\",\n\"number\": 874}"
      }
    },
    {
      "in" : "console.in",
      "out": "ae.out",
      "commands" : {
        "ae_test": "advantEdge deploy dummy"
      }
    },
    {
      "in" : "console.in",
      "out": "remote.limit.out",
      "commands" : {
        "test_limit" : "limit cores node1 0.5",
        "test_limit2" : "limit cores node2 0.7"
      }
    },
    {
      "in" : "remote.limit.in",
      "out" : "rest.get1",
      "commands" : {
        "set_limits $limits": "toGET resource $limits"
      }
    },
    {
      "in" : "console.in",
      "out" : "mm.out",
      "commands" : {
        "assign_client $client_id" : "matchMaker assign_client $client_id"
      }
    },
    {
      "in" : "rest.client.register",
      "out" : "mm.out",
      "commands" : {
        "register_client $client_as_json_string" : "matchMaker register_client $client_as_json_string"
      }
    },

    {
      "in" : "rest.node.disconnect",
      "out" : "mm.out",
      "commands" : {
        "disconnect_client $client_as_json_string" : "matchMaker disconnect_client $client_as_json_string"
      }
    },
    {
      "in" : "rest.node.register",
      "out" : "mm.out",
      "commands" : {
        "register_node $node_as_json_string" : "matchMaker register_node $node_as_json_string"
      }
    },
    {
      "in" : "rest.client.register",
      "out" : "console.out",
      "commands" : {
        "register_client $client_as_json_string" : "console register_client $client_as_json_string"
      }
    },
    {
      "in" : "rest.node.register",
      "out" : "console.out",
      "commands" : {
        "register_node $node_as_json_string" : "console register_node $node_as_json_string"
      }
    },
    {
      "in" : "rest.client.assign",
      "out" : "mm.out",
      "commands" : {
        "assign_client $client_id" : "matchMaker assign_client $client_id"
      }
    },
    {
      "in" : "mm.in",
      "out" : "console.out",
      "commands" : {
        "give_node $client_id $node_id": "console client $client_id was assigned node $node_id"
      }
    },
    {
      "in" : "mm.in",
      "out" : "rest.client.getnode",
      "commands" : {
        "give_node $client_id $node_json_body": "toGET resource $client_id $node_json_body"
      }
    },
    {
      "in" : "rest.client.report",
      "out" : "util.fileOut",
      "commands" : {
        "report_latency $path $content": "file_out append $path $content"
      }
    },
    {
      "in" : "rest.node.heartbeat",
      "out" : "mm.out",
      "commands" : {
        "node_receive_heart_beat $node_as_json_string" : "matchMaker node_receive_heart_beat $node_as_json_string"
      }
    },
    {
      "in" : "rest.client.heartbeat",
      "out" : "mm.out",
      "commands" : {
        "client_receive_heart_beat $client_as_json_string" : "matchMaker client_receive_heart_beat $client_as_json_string"
      }
    }
  ]
}